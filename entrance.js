(()=>{var e={392:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.API_ORIGIN=void 0,t.API_ORIGIN="https://serene-reef-96808.herokuapp.com"}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}(()=>{"use strict";const e=n(392);let t;async function r(t,n){return await o(`${e.API_ORIGIN}/random/poll`,{access_token:t},n)}async function o(e,t,n){const r=await fetch(e,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"},keepalive:!0}).then((function(e){return e.json()})).then(n).catch((function(e){console.error("Error:",e)}));if(console.log(r),!r)throw alert("network error!"),new Error("network error!");return r}async function a(t){return await o(`${e.API_ORIGIN}/random/entry`,{},t)}window.addEventListener("beforeunload",(function(n){(async()=>{if(void 0!==t){const r=await async function(t,n){return await o(`${e.API_ORIGIN}/random/cancel`,{access_token:t},(e=>e))}(t.access_token);if(!r.legal)throw alert(`sending cancel somehow resulted in an error: ${r.whyIllegal}`),new Error(`sending cancel somehow resulted in an error: ${r.whyIllegal}`);if(r.cancellable)return;n.preventDefault(),n.returnValue="cannot cancel the game, as it is already ready"}})()})),(async()=>{let e=await a((e=>e));for(t=e;"let_the_game_begin"!=e.state;){await new Promise((e=>setTimeout(e,200*(2+Math.random())*.8093)));const n=await r(e.access_token,(e=>e));n.legal?(e=n.ret,t=e):(e=await a((e=>e)),t=e)}var n,o,s;n=e.access_token,o=e.is_first_move_my_move,s=e.is_IA_down_for_me,alert("Let the game begin"),sessionStorage.access_token=n,sessionStorage.is_first_move_my_move=JSON.stringify(o),sessionStorage.is_IA_down_for_me=JSON.stringify(s),location.href="main.html"})()})()})();